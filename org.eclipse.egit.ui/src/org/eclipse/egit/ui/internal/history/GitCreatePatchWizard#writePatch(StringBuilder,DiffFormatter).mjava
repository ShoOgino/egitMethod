	private void writePatch(StringBuilder sb, DiffFormatter diffFmt)
			throws IOException {
		FileDiff[] diffs = FileDiff.compute(walker, commit);
		for (FileDiff diff : diffs) {
			String projectRelativePath = getProjectRelaticePath(diff);
			sb.append("diff --git ").append(projectRelativePath).append(" ") 					.append(projectRelativePath).append("\n"); 			diff.outputDiff(sb, db, diffFmt, true, true);
		}
	}

