	@Override
	public boolean isEnabled() {
		Repository[] repos = getRepositories();
		for (Repository repo : repos) {
			String fullBranch = RepositoryStateCache.INSTANCE
					.getFullBranchName(repo);
			if (fullBranch == null
					|| !fullBranch.startsWith(Constants.R_REFS)) {
				return false;
			}
			if (RepositoryStateCache.INSTANCE.getHead(repo) == null) {
				return false;
			}
		}
		return repos.length > 0;
	}

